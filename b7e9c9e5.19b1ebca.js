(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{114:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return u})),n.d(t,"rightToc",(function(){return d})),n.d(t,"default",(function(){return b}));var a=n(2),r=n(6),i=(n(0),n(144)),o=n(151),c=n(152),l=n(147),s={title:"Leaf Link > Provider connection widget",description:"Leaf Link > Provider connection widget",sidebar_label:"Provider connection widget"},u={unversionedId:"Link_provider_connection",id:"Link_provider_connection",isDocsHomePage:!1,title:"Leaf Link > Provider connection widget",description:"Leaf Link > Provider connection widget",source:"@site/docs/Link_provider_connection.md",permalink:"/docs/docs/Link_provider_connection",editUrl:"https://github.com/Leaf-Agriculture/docs/tree/master/docs/Link_provider_connection.md",sidebar_label:"Provider connection widget",sidebar:"docs",previous:{title:"Beta > Layers Endpoints",permalink:"/docs/docs/beta_layers_endpoints"},next:{title:"Leaf Link > File upload widget",permalink:"/docs/docs/Link_file_upload"}},d=[{value:"Overview",id:"overview",children:[]},{value:"Get started",id:"get-started",children:[{value:"1. Sign in with a Leaf account",id:"1-sign-in-with-a-leaf-account",children:[]},{value:"2. Get an access token",id:"2-get-an-access-token",children:[]},{value:"3. Get to know the Leaf user entity",id:"3-get-to-know-the-leaf-user-entity",children:[]}]},{value:"Set up",id:"set-up",children:[{value:"John Deere",id:"john-deere",children:[]}]},{value:"Tutorial",id:"tutorial",children:[{value:"Angular",id:"angular",children:[]}]}],p={rightToc:d};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"overview"},"Overview"),Object(i.b)("p",null,"The Provider Connection widget allows the user to associate their Leaf user with existing provider accounts. It just needs a minimal setup and few lines of code."),Object(i.b)("p",{align:"center"},Object(i.b)("img",{alt:"File upload widget",width:"50%",src:Object(l.a)("img/leaf-provider-connection.png")})),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"Beta")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"This is a beta feature."))),Object(i.b)("h2",{id:"get-started"},"Get started"),Object(i.b)("h3",{id:"1-sign-in-with-a-leaf-account"},"1. Sign in with a Leaf account"),Object(i.b)("p",null,"You will need a Leaf account. If you don't have one yet, you can create it ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://withleaf.io/account/quickstart"}),"here"),"."),Object(i.b)("h3",{id:"2-get-an-access-token"},"2. Get an access token"),Object(i.b)("p",null,"To use the widget you will need a Leaf token. Use our ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/authentication"}),"authentication guide")," to know how it works."),Object(i.b)("h3",{id:"3-get-to-know-the-leaf-user-entity"},"3. Get to know the Leaf user entity"),Object(i.b)("p",null,"All control of connected providers is done at the Leaf user level (usually it represents the user of your application), so it's important to know more about it ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/user_management_overview"}),"here"),"."),Object(i.b)("h2",{id:"set-up"},"Set up"),Object(i.b)("p",null,"To use the widget you will need to enable the providers. Don't worry, you only need to set it up once."),Object(i.b)("h3",{id:"john-deere"},"John Deere"),Object(i.b)("p",null,"To enable John Deere as a provider in the widget you need to have your application already registed with John Deere. You can find more info on how to create a developer account ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://withleaf.io/en/whats-new/john-deere-authentication-with-leaf/"}),"here"),"."),Object(i.b)("h4",{id:"redirect-uri"},"Redirect URI"),Object(i.b)("p",null,'The first step is to add our widget URL in the "Redirect URI" section:'),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-markup"}),"https://widget.withleaf.io\n")),Object(i.b)("p",null,"In the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.deere.com/#/applications"}),"My applications")," page, select your application and edit it to add the URL here"),Object(i.b)("p",{align:"center"},Object(i.b)("img",{alt:"File upload widget",width:"50%",src:Object(l.a)("img/leaf-provider-connection-jd-redirect-uri.png")})),Object(i.b)("h4",{id:"application-info"},"Application info"),Object(i.b)("p",null,"We will need your ",Object(i.b)("inlineCode",{parentName:"p"},"Application Id")," and ",Object(i.b)("inlineCode",{parentName:"p"},"Secret")," so you can inform them on this endpoint."),Object(i.b)("p",null,"\xa0",Object(i.b)("span",{class:"badge badge--warning"},"POST")," ",Object(i.b)("inlineCode",{parentName:"p"},"/usermanagement/api/app-keys/JohnDeere/{appName}/{clientEnvironment}")),Object(i.b)("p",null,"You can set the ",Object(i.b)("inlineCode",{parentName:"p"},"appName")," and the ",Object(i.b)("inlineCode",{parentName:"p"},"clientEnvironment"),"as the environment your application is enabled on John Deere ",Object(i.b)("inlineCode",{parentName:"p"},"STAGE")," or ",Object(i.b)("inlineCode",{parentName:"p"},"PRODUCTION"),"."),Object(i.b)("p",null,"Here is a request example:"),Object(i.b)(o.a,{defaultValue:"sh",values:[{label:"cURL",value:"sh"},{label:"Python",value:"py"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},Object(i.b)(c.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const axios = require('axios')\nconst TOKEN = 'YOUR_TOKEN'\n\nconst endpoint ='https://api.withleaf.io/services/usermanagement/api/app-keys/JohnDeere/LeafWidget/PRODUCTION'\nconst headers = { 'Authorization': `Bearer ${TOKEN}` }\n\nconst data = {\n  clientKey: \"string\",\n  clientSecret: \"string\"\n}\n\naxios.post(endpoint, { headers, data })\n    .then(res => console.log(res.data))\n    .catch(console.error)\n"))),Object(i.b)(c.a,{value:"py",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-py"}),"import requests\n\nTOKEN = 'YOUR_TOKEN'\n\nendpoint = 'https://api.withleaf.io/services/usermanagement/api/app-keys/JohnDeere/LeafWidget/PRODUCTION'\nheaders = {'Authorization': f'Bearer {TOKEN}'}\n\ndata = {\n  clientKey: \"string\",\n  clientSecret: \"string\"\n}\n\nresponse = requests.post(endpoint, headers=headers, json=data)\nprint(response.json())\n"))),Object(i.b)(c.a,{value:"sh",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),'curl -X POST \\\n    -H \'Authorization: Bearer YOUR_TOKEN\' \\\n    -d \'{ "clientKey": "string", "clientSecret": "string" }\'\n    \'https://api.withleaf.io/services/usermanagement/api/app-keys/JohnDeere/LeafWidget/PRODUCTION\'\n')))),Object(i.b)("h2",{id:"tutorial"},"Tutorial"),Object(i.b)("p",null,"This widget is only available for Angular."),Object(i.b)("h3",{id:"angular"},"Angular"),Object(i.b)("p",null,"To add this Leaf widget in an Angular application, you can use the ",Object(i.b)("inlineCode",{parentName:"p"},"@withleaf.io/angular-ui-kit")," library, which is a JavaScript library that provides all Leaf UI Widgets.\nHere are the general steps to get started:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Install the @withleaf.io/angular-ui-kit package using ",Object(i.b)("inlineCode",{parentName:"li"},"npm"),":")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"npm i @withleaf.io/angular-ui-kit\n")),Object(i.b)("ol",{start:2},Object(i.b)("li",{parentName:"ol"},"Import the library in your component or module file:")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import { ProvidersModule } from '@withleaf.io/angular-ui-kit';\n")),Object(i.b)("ol",{start:3},Object(i.b)("li",{parentName:"ol"},"Add the component to the HTML. You need your Leaf token (",Object(i.b)("inlineCode",{parentName:"li"},"leafToken"),") and a Leaf user ID (",Object(i.b)("inlineCode",{parentName:"li"},"leafUser"),") to set the required properties in the HTML component. Just add it to the container div.\nYou can also customize it adding your company name (",Object(i.b)("inlineCode",{parentName:"li"},"companyName"),") and company logo (",Object(i.b)("inlineCode",{parentName:"li"},"companyLogoUrl"),").")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'<div class="container">\n  <leaf-providers leafToken="{yourLeafToken}" leafUser="{yourLeafUserId}"       \n      companyName="{name}" companyLogoUrl="{image URL}">\n  </leaf-providers>\n</div>\n')))}b.isMDXComponent=!0},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),u=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=u(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=u(n),b=a,f=d["".concat(o,".").concat(b)]||d[b]||p[b]||i;return n?r.a.createElement(f,c(c({ref:t},s),{},{components:n})):r.a.createElement(f,c({ref:t},s))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=b;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var s=2;s<i;s++)o[s]=n[s];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},145:function(e,t,n){"use strict";var a=n(0),r=n(20);t.a=function(){var e=Object(a.useContext)(r.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},146:function(e,t,n){"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}},147:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n(145),r=n(148);function i(){var e=Object(a.a)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,a){var i=void 0===a?{}:a,o=i.forcePrependBaseUrl,c=void 0!==o&&o,l=i.absolute,s=void 0!==l&&l;if(!n)return n;if(n.startsWith("#"))return n;if(Object(r.b)(n))return n;if(c)return t+n;var u=!n.startsWith(t)?t+n.replace(/^\//,""):n;return s?e+u:u}(i,n,e,t)}}}function o(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},148:function(e,t,n){"use strict";function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!a(e)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}))},149:function(e,t,n){"use strict";var a=n(0),r=Object(a.createContext)(void 0);t.a=r},150:function(e,t,n){"use strict";var a=n(0),r=n(149);t.a=function(){var e=Object(a.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},151:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(150),o=n(146),c=n(48),l=n.n(c),s=37,u=39;t.a=function(e){var t=e.block,n=e.children,c=e.defaultValue,d=e.values,p=e.groupId,b=Object(i.a)(),f=b.tabGroupChoices,h=b.setTabGroupChoices,m=Object(a.useState)(c),O=m[0],v=m[1],j=Object(a.useState)(!1),g=j[0],y=j[1];if(null!=p){var w=f[p];null!=w&&w!==O&&d.some((function(e){return e.value===w}))&&v(w)}var N=function(e){v(e),null!=p&&h(p,e)},k=[],L=function(e){e.metaKey||e.altKey||e.ctrlKey||y(!0)},T=function(){y(!1)};return Object(a.useEffect)((function(){window.addEventListener("keydown",L),window.addEventListener("mousedown",T)}),[]),r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(o.a)("tabs",{"tabs--block":t})},d.map((function(e){var t=e.value,n=e.label;return r.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":O===t,className:Object(o.a)("tabs__item",l.a.tabItem,{"tabs__item--active":O===t}),style:g?{}:{outline:"none"},key:t,ref:function(e){return k.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case u:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case s:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(k,e.target,e),L(e)},onFocus:function(){return N(t)},onClick:function(){N(t),y(!1)},onPointerDown:function(){return y(!1)}},n)}))),r.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(n).filter((function(e){return e.props.value===O}))[0]))}},152:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){return r.a.createElement("div",null,e.children)}}}]);